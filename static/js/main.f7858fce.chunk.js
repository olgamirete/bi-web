(this["webpackJsonpbi-web"]=this["webpackJsonpbi-web"]||[]).push([[0],{167:function(e,t,n){},168:function(e,t,n){},169:function(e,t,n){},170:function(e,t,n){},171:function(e,t,n){},172:function(e,t,n){},173:function(e,t,n){},174:function(e,t,n){},175:function(e,t,n){},176:function(e,t,n){},177:function(e,t,n){},178:function(e,t,n){},356:function(e,t,n){},357:function(e,t,n){},358:function(e,t,n){},359:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n(1),r=n.n(c),s=n(49),o=n.n(s),i=(n(167),n(8));n(168);var l=function(){var e=Object(c.useState)(!0),t=Object(i.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(!1),s=Object(i.a)(r,2),o=s[0],l=s[1],d=Object(c.useState)(!0),u=Object(i.a)(d,2),h=u[0],b=u[1],j=Object(c.useState)(!1),p=Object(i.a)(j,2),f=p[0],g=p[1],O=Object(c.useCallback)((function(){a((function(e){return!e}))}),[]),v=Object(c.useCallback)((function(){l((function(e){return!e}))}),[]),x=Object(c.useCallback)((function(){b((function(e){return!e}))}),[]),m=Object(c.useCallback)((function(){g((function(e){return!e}))}),[]);return[{showSidePanel:n,snapToGrid:o,displayGrid:h,allowSelection:f},{setFlagShowSidePanel:a,toggleSidePanel:O,toggleSnapToGrid:v,toggleDisplayGrid:x,toggleFlagAllowSelection:m,setFlagAllowSelection:g}]},d=20,u={width:480,height:300};var h=function(e){var t=Object(c.useState)({past:[],present:new Map,future:[]}),n=Object(i.a)(t,2),a=n[0],r=n[1],s=Object(c.useState)(0),o=Object(i.a)(s,2),l=o[0],h=o[1],b=Object(c.useCallback)((function(e,t){return{id:e,pos:void 0===t.pos?{x:0,y:0}:t.pos,size:void 0===t.size?u:t.size,propsBeforeChange:{pos:void 0===t.pos?{x:0,y:0}:t.pos,size:void 0===t.size?u:t.size},selected:!1,flags:{allowResize:{width:!1,height:!1},allowMove:!1},type:void 0===t.type?"empty":t.type,contentOptions:{showLegend:!1,fields:{categories:[],valuesX:[],valuesY:[]}}}}),[]),j=Object(c.useCallback)((function(e,t,n){var a=e.get(t),c={};for(var r in a)n.hasOwnProperty(r)&&"id"!==r?c[r]=n[r]:c[r]=a[r];e.set(t,c)}),[]),p=Object(c.useCallback)((function(e,t,n){var a=e.get(t),c={};for(var r in a.contentOptions)n.hasOwnProperty(r)?c[r]=n[r]:c[r]=a.contentOptions[r];j(e,t,{contentOptions:c})}),[j]),f=Object(c.useCallback)((function(e){r((function(t){var n=new Map(t.present),a="card-"+l,c=b(a,e);return n.set(a,c),{past:t.past.concat([t.present]),present:n,future:[]}})),h((function(e){return e+1}))}),[l,b]),g=Object(c.useCallback)((function(t,n){var a={left:e.snapToGrid?Math.round(n.left/d,0)*d:n.left,top:e.snapToGrid?Math.round(n.top/d,0)*d:n.top};r((function(e){var n=new Map(e.present);return j(n,t,{pos:a}),{past:e.past.concat([e.present]),present:n,future:[]}}))}),[e.snapToGrid,j]),O=Object(c.useCallback)((function(t){r((function(n){var a=new Map(n.present);return a.forEach((function(n){if(!0===n.selected){var c=n.propsBeforeChange.pos,r={left:c.left+t.x,top:c.top+t.y},s={left:e.snapToGrid?Math.round(r.left/d,0)*d:r.left,top:e.snapToGrid?Math.round(r.top/d,0)*d:r.top};j(a,n.id,{pos:s})}})),{past:n.past,present:a,future:n.future}}))}),[e.snapToGrid,j]),v=Object(c.useCallback)((function(t,n,a,c){r((function(r){var s=r.present.get(t),o=s.propsBeforeChange.size,i=s.propsBeforeChange.pos,l={left:c.right?Math.min(i.left+n.x,i.left+o.width-40):i.left,top:c.bottom?Math.min(i.top+n.y,i.top+o.height-40):i.top},u={left:e.snapToGrid&&c.right&&a.width?Math.round(l.left/d,0)*d:l.left,top:e.snapToGrid&&c.bottom&&a.height?Math.round(l.top/d,0)*d:l.top},h={width:Math.max(o.width+n.x*(c.right?-1:1),40),height:Math.max(o.height+n.y*(c.bottom?-1:1),40)},b=h.width,p=h.height;e.snapToGrid&&(a.width&&(b=c.right?o.width-(u.left-i.left):Math.round((i.left+h.width)/d,0)*d-i.left),a.height&&(p=c.bottom?o.height-(u.top-i.top):20*Math.round((i.top+h.height)/20,0)-i.top));var f={width:b,height:p},g=new Map(r.present);return j(g,t,{pos:u,size:f}),{past:r.past,present:g,future:r.future}}))}),[e.snapToGrid,j]),x=Object(c.useCallback)((function(e){r((function(t){var n=new Map(t.present),a=n.get(e);return j(n,e,{selected:!a.selected}),{past:t.past,present:n,future:t.future}}))}),[j]),m=Object(c.useCallback)((function(e){r((function(t){var n=new Map(t.present);return n.delete(e),{past:t.past.concat([t.present]),present:n,future:[]}}))}),[]),w=Object(c.useCallback)((function(){r((function(e){var t=!1,n=new Map(e.present);return n.forEach((function(e){!0===e.selected&&(n.delete(e.id),t=!0)})),{past:t?e.past.concat([e.present]):e.past,present:t?n:e.present,future:t?[]:e.future}}))}),[]),y=Object(c.useCallback)((function(){r((function(e){var t=new Map(e.present);return t.forEach((function(e){j(t,e.id,{propsBeforeChange:{pos:e.pos,size:e.size}})})),{past:e.past.concat([e.present]),present:t,future:[]}}))}),[j]),M=Object(c.useCallback)((function(e){r((function(t){var n=new Map(t.present);return n.forEach((function(t){!0===t.selected&&j(n,t.id,{type:e})})),{past:t.past.concat([t.present]),present:n,future:[]}}))}),[j]),S=Object(c.useCallback)((function(e){r((function(t){var n=new Map(t.present),a=n.get(e);return p(n,e,{showLegend:!a.contentOptions.showLegend}),{past:t.past.concat([t.present]),present:n,future:[]}}))}),[p]),N=Object(c.useCallback)((function(e){r((function(e){var t=new Map(e.present);return t.forEach((function(e){!0===e.selected&&p(t,e.id,{showLegend:!e.contentOptions.showLegend})})),{past:e.past.concat([e.present]),present:t,future:[]}}))}),[p]),C=Object(c.useCallback)((function(){r((function(e){var t=new Map(e.present);return t.forEach((function(e){!0===e.selected&&j(t,e.id,{selected:!1})})),{past:e.past,present:t,future:e.future}}))}),[j]),k=Object(c.useCallback)((function(e){return!0===a.present.has(e)?a.present.get(e).selected:Error("cardId does not exist.")}),[a.present]),P=Object(c.useCallback)((function(e,t,n){var a=n.pos.left,c=n.pos.top,r=Math.max(n.size.width,0),s=Math.max(n.size.height,0),o=e.left>=a+n.borderWidth&&e.left+t.width<=a+n.borderWidth+r-2*n.borderWidth,i=e.top>=c+n.borderWidth&&e.top+t.height<=c+n.borderWidth+s-2*n.borderWidth;return o&&i}),[]),z=Object(c.useCallback)((function(e,t){r((function(n){var a=new Map(n.present);return a.forEach((function(n){var c=P(n.pos,n.size,e);j(a,n.id,{selected:t?c||n.selected:c})})),{past:n.past,present:a,future:n.future}}))}),[P,j]),D=Object(c.useCallback)((function(){r((function(e){return{past:e.past.length>0?e.past.slice(0,e.past.length-1):e.past,present:e.past.length>0?e.past[e.past.length-1]:e.present,future:e.past.length>0?e.future.concat([e.present]):e.future}}))}),[]),I=Object(c.useCallback)((function(){r((function(e){return{past:e.future.length>0?e.past.concat([e.present]):e.past,present:e.future.length>0?e.future[e.future.length-1]:e.present,future:e.future.length>0?e.future.slice(0,e.future.length-1):e.future}}))}),[]),E={canUndo:a.past.length>0,canRedo:a.future.length>0},F={add:f,move:g,translateSelected:O,resize:v,__updatePropsBeforeChange:y,isSelected:k,toggleSelect:x,clearSelection:C,delete:m,deleteSelected:w,selectWithRectangle:z,setContentTypeOfSelectedCards:M,undo:D,redo:I,toggleCardLegend:S,toggleSelectedCardsLegend:N};return[a.present,E,F]};var b=function(){var e=new Map;return e.set("table1",{id:"table1",fields:["anio","nombre","cantidad"]}),e.set("table2",{id:"table2",fields:["dni","provincia","edad"]}),e.set("table3",{id:"table3",fields:["fruta","calor\xedas"]}),[e,null]};n(169);var j=function(e){return Object(a.jsxs)("div",{className:"controls",children:[Object(a.jsx)("button",{className:"button",onPointerDown:e.controlMethods.toggleSidePanel,children:"Toggle menu"}),Object(a.jsx)("button",{className:"button"+(e.cardFlags.canUndo?"":" disabled"),onPointerDown:e.cardMethods.undo,children:"Undo"}),Object(a.jsx)("button",{className:"button"+(e.cardFlags.canRedo?"":" disabled"),onPointerDown:e.cardMethods.redo,children:"Redo"}),Object(a.jsx)("button",{alt:"Toggle snap to grid",className:"button"+(e.controlFlags.snapToGrid?" active":""),onPointerDown:e.controlMethods.toggleSnapToGrid,children:"Snap to grid"}),Object(a.jsx)("button",{alt:"Toggle display grid",className:"button"+(e.controlFlags.displayGrid?" active":""),onPointerDown:e.controlMethods.toggleDisplayGrid,children:"Display grid"}),Object(a.jsx)("button",{className:"button",onPointerDown:function(){return e.cardMethods.add({pos:{left:20,top:20}})},children:"+"}),Object(a.jsx)("button",{className:"button"+(e.controlFlags.allowSelection?" active":""),onPointerDown:e.controlMethods.toggleFlagAllowSelection,children:"Select"}),Object(a.jsx)("button",{className:"button",onPointerDown:e.cardMethods.deleteSelected,children:"Delete"})]})};n(170),n(171),n(172),n(173);var p=function(e){return Object(a.jsx)("li",{id:"table-"+e.tableId+"-field-"+e.fieldName,className:"field-item",children:e.fieldName})};var f=function(e){var t=Object(c.useState)(!1),n=Object(i.a)(t,2),r=n[0],s=n[1];return Object(a.jsxs)("div",{className:"table-fields-section",children:[Object(a.jsxs)("div",{className:"container-button-and-title",children:[Object(a.jsx)("button",{className:"button-expand-collapse",onPointerUp:function(e){e.target.innerHTML=r?"+":"-",s(!r)},children:"+"}),Object(a.jsx)("h4",{id:e.tableStructure.id,className:"fields-table-name",children:e.tableStructure.id})]}),Object(a.jsx)("ul",{className:"fields-list"+(r?"":" hidden"),children:e.tableStructure.fields.map((function(t,n,c){return Object(a.jsx)(p,{tableId:e.tableStructure.id,fieldName:t},n)}))})]})};var g=function(e){return Object(a.jsxs)("section",{className:"section"+("fields"===e.activeSection?" active":""),children:[Object(a.jsx)("h3",{className:"title",children:"Fields"}),Array.from(e.dataStructure.values()).map((function(e,t,n){return Object(a.jsx)(f,{tableStructure:e},t)}))]})};var O=function(e){return Object(a.jsxs)("section",{className:"section"+("format"===e.activeSection?" active":""),children:[Object(a.jsx)("h3",{className:"title",children:"Format"}),Object(a.jsx)("h4",{children:"Set chart type"}),Object(a.jsx)("button",{onPointerDown:function(){return e.cardMethods.setContentTypeOfSelectedCards("barchart")},children:"Bar chart"}),Object(a.jsx)("button",{onPointerDown:function(){return e.cardMethods.setContentTypeOfSelectedCards("piechart")},children:"Pie chart"}),Object(a.jsx)("button",{onPointerDown:function(){return e.cardMethods.setContentTypeOfSelectedCards("linechart")},children:"Line chart"}),Object(a.jsx)("button",{onPointerDown:function(){return e.cardMethods.setContentTypeOfSelectedCards("barchart2")},children:"Bar chart 2"}),Object(a.jsx)("h4",{children:"Set chart options"}),Object(a.jsx)("button",{onPointerDown:e.cardMethods.toggleSelectedCardsLegend,children:"Toggle legend"})]})};var v=function(e){return Object(a.jsxs)("section",{className:"section"+("other"===e.activeSection?" active":""),children:[Object(a.jsx)("h3",{className:"title",children:"Other"}),"Other"]})};var x=function(e){var t=Object(c.useState)("fields"),n=Object(i.a)(t,2),r=n[0],s=n[1],o=function(t){var n=t.target.dataset.section;void 0===n&&(n=t.target.parentNode.dataset.section),r!==n?(s(n),e.controlMethods.setFlagShowSidePanel(!0)):e.controlMethods.toggleSidePanel()};return Object(a.jsxs)("div",{className:"side-panel"+(e.controlFlags.showSidePanel?"":" hide"),children:[Object(a.jsxs)("div",{className:"buttons-container",children:[Object(a.jsx)("button",{"data-section":"fields",className:"fields"===r?"active":"",onPointerDown:o,children:Object(a.jsx)("span",{className:"text",children:"Fields"})}),Object(a.jsx)("button",{"data-section":"format",className:"format"===r?"active":"",onPointerDown:o,children:Object(a.jsx)("span",{className:"text",children:"Format"})}),Object(a.jsx)("button",{"data-section":"other",className:"other"===r?"active":"",onPointerDown:o,children:Object(a.jsx)("span",{className:"text",children:"Other"})})]}),Object(a.jsxs)("div",{className:"sections-container",children:[Object(a.jsx)(g,{activeSection:r,dataStructure:e.dataStructure}),Object(a.jsx)(O,{activeSection:r,cardMethods:e.cardMethods}),Object(a.jsx)(v,{activeSection:r})]})]})},m=(n(174),n(19));n(175),n(176);var w=function(e){var t=e.cardInfo.size.width-2*e.borderWidth,n=e.cardInfo.size.height-2*e.borderWidth,c=20,r=n-20,s=n-r,o=t-c-10,i=n-.5*(n-r)-s;return Object(a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 "+t+" "+n,className:"bar-chart",width:t,height:n,children:[Object(a.jsxs)("g",{children:[Object(a.jsx)("rect",{className:"background",x:"0",y:"0",width:t,height:n,ry:"0"}),Object(a.jsx)("text",{x:"30",y:"30",children:t}),Object(a.jsx)("text",{x:"30",y:"50",children:"Show legend: "+e.cardInfo.contentOptions.showLegend})]}),Object(a.jsx)("g",{children:Object(a.jsxs)("g",{children:[Object(a.jsxs)("g",{children:[Object(a.jsx)("path",{d:"M 10,"+r+" h "+o}),Object(a.jsxs)("g",{children:[Object(a.jsx)("path",{d:"M 30,"+r+" v 5"}),Object(a.jsx)("path",{d:"M 40,"+r+" v 5"}),Object(a.jsx)("path",{d:"M 50,"+r+" v 5"}),Object(a.jsx)("path",{d:"M 60,"+r+" v 5"}),Object(a.jsx)("path",{d:"M 70,"+r+" v 8"}),Object(a.jsx)("path",{d:"M 80,"+r+" v 5"}),Object(a.jsx)("path",{d:"M 90,"+r+" v 5"}),Object(a.jsx)("path",{d:"M 100,"+r+" v 5"}),Object(a.jsx)("path",{d:"M 110,"+r+" v 5"}),Object(a.jsx)("path",{d:"M 120,"+r+" v 8"})]})]}),Object(a.jsxs)("g",{children:[Object(a.jsx)("path",{d:"M 20,"+s+" v "+i}),Object(a.jsxs)("g",{children:[Object(a.jsx)("path",{d:"M 20, 110 h -5"}),Object(a.jsx)("path",{d:"M 20, 100 h -5"}),Object(a.jsx)("path",{d:"M 20, 90 h -5"}),Object(a.jsx)("path",{d:"M 20, 80 h -5"}),Object(a.jsx)("path",{d:"M 20, 70 h -8"}),Object(a.jsx)("path",{d:"M 20, 60 h -5"}),Object(a.jsx)("path",{d:"M 20, 60 h -5"}),Object(a.jsx)("path",{d:"M 20, 50 h -5"}),Object(a.jsx)("path",{d:"M 20, 40 h -5"}),Object(a.jsx)("path",{d:"M 20, 30 h -8"})]})]})]})}),Object(a.jsx)("g",{children:Object(a.jsxs)("g",{children:[Object(a.jsx)("g",{}),Object(a.jsx)("g",{})]})}),Object(a.jsxs)("g",{children:[Object(a.jsx)("rect",{x:"20",y:"60",width:"20",height:"20",className:"bar"}),Object(a.jsx)("rect",{x:"60",y:"40",width:"20",height:"50",className:"bar"})]})]})};n(177);var y=function(e){return Object(a.jsxs)("svg",{className:"pie-chart",children:[Object(a.jsx)("text",{x:"0",y:"20",children:"Pie chart"}),Object(a.jsx)("rect",{cx:"0",cy:"0",width:"10",height:"10"})]})},M=(n(178),n(9)),S=[{name:"Page A",uv:4e3,pv:2400,amt:2400},{name:"Page B",uv:3e3,pv:1398,amt:2210},{name:"Page C",uv:2e3,pv:9800,amt:2290},{name:"Page D",uv:2780,pv:3908,amt:2e3},{name:"Page E",uv:1890,pv:4800,amt:2181},{name:"Page F",uv:2390,pv:3800,amt:2500},{name:"Page G",uv:3490,pv:4300,amt:2100}];var N=function(e){var t=e.cardInfo.size.width-2*e.borderWidth,n=e.cardInfo.size.height-2*e.borderWidth;return Object(a.jsxs)(M.f,{width:t,height:n,data:S,margin:{top:5,right:30,left:20,bottom:5},children:[Object(a.jsx)(M.c,{strokeDasharray:"3 3"}),Object(a.jsx)(M.h,{dataKey:"name"}),Object(a.jsx)(M.i,{}),Object(a.jsx)(M.g,{}),Object(a.jsx)(M.d,{}),Object(a.jsx)(M.e,{type:"monotone",dataKey:"pv",stroke:"#8884d8",activeDot:{r:8}}),Object(a.jsx)(M.e,{type:"monotone",dataKey:"uv",stroke:"#82ca9d"})]})},C=(n(356),[{x:0,y:0},{x:10,y:10},{x:20,y:15},{x:30,y:20},{x:40,y:25},{x:50,y:30},{x:60,y:40},{x:70,y:5},{x:80,y:20},{x:90,y:10},{x:100,y:0},{x:110,y:0}]);var k=function(e){var t=e.cardInfo.size.width-2*e.borderWidth,n=e.cardInfo.size.height-2*e.borderWidth;return Object(a.jsxs)(M.b,{width:t,height:n,data:C,children:[Object(a.jsx)(M.c,{strokeDasharray:"3 3"}),Object(a.jsx)(M.h,{dataKey:"name"}),Object(a.jsx)(M.i,{}),Object(a.jsx)(M.g,{}),Object(a.jsx)(M.d,{layout:"horizontal",verticalAlign:"bottom",iconType:"square",iconSize:3}),Object(a.jsx)(M.a,{dataKey:"x",fill:"#8884d8"}),Object(a.jsx)(M.a,{dataKey:"y",fill:"#82ca9d"})]})};var P=function(e){var t=Object(c.useCallback)((function(e){switch(e.cardInfo.type){case"barchart":return Object(a.jsx)(w,Object(m.a)({},e));case"piechart":return Object(a.jsx)(y,Object(m.a)({},e));case"linechart":return Object(a.jsx)(N,Object(m.a)({},e));case"barchart2":return Object(a.jsx)(k,Object(m.a)({},e));default:return Object(a.jsx)(w,Object(m.a)({},e))}}),[]),n=e.cardInfo.selected;return Object(a.jsxs)("div",{id:e.cardInfo.id,className:"resizeable-card-container"+(n?" selected":"")+(e.controlFlags.snapToGrid?" animate-all":"")+(e.dashboardFlags.overrideHoverPointers?" unset-cursors":""),style:{left:e.cardInfo.pos.left+"px",top:e.cardInfo.pos.top+"px",backgroundColor:e.color},children:[Object(a.jsxs)("div",{className:"col-container",children:[Object(a.jsx)("div",{className:"corner nw","data-anchor":{right:!0,bottom:!0}}),Object(a.jsx)("div",{className:"border vertical left","data-anchor":{right:!0,bottom:!1}}),Object(a.jsx)("div",{className:"corner sw","data-anchor":{right:!0,bottom:!1}})]}),Object(a.jsxs)("div",{className:"col-container",children:[Object(a.jsx)("div",{className:"border horizontal top","data-anchor":{right:!1,bottom:!0}}),Object(a.jsx)("div",{className:"content",style:{width:e.cardInfo.size.width+"px",height:e.cardInfo.size.height+"px",borderWidth:1},children:Object(a.jsx)(t,Object(m.a)(Object(m.a)({},e),{},{borderWidth:1}))}),Object(a.jsx)("div",{className:"border horizontal bottom","data-anchor":{right:!1,bottom:!1}})]}),Object(a.jsxs)("div",{className:"col-container",children:[Object(a.jsx)("div",{className:"corner ne","data-anchor":{right:!1,bottom:!0}}),Object(a.jsx)("div",{className:"border vertical right","data-anchor":{right:!1,bottom:!1}}),Object(a.jsx)("div",{className:"corner se","data-anchor":{right:!1,bottom:!1}})]})]})};var z=function(e,t,n,a,r){var s=Object(c.useState)({width:!1,height:!1}),o=Object(i.a)(s,2),l=o[0],d=o[1],u=Object(c.useState)(!1),h=Object(i.a)(u,2),b=h[0],j=h[1],p=Object(c.useState)({x:0,y:0}),f=Object(i.a)(p,2),g=f[0],O=f[1],v=Object(c.useState)({right:!1,bottom:!1}),x=Object(i.a)(v,2),m=x[0],w=x[1],y=Object(c.useState)(null),M=Object(i.a)(y,2),S=M[0],N=M[1],C=Object(c.useState)(!1),k=Object(i.a)(C,2),P=k[0],z=k[1],D=Object(c.useState)(!1),I=Object(i.a)(D,2),E=I[0],F=I[1],T=Object(c.useState)({flagDraw:!1,pos:{left:0,top:0},size:{width:0,height:0},borderWidth:t}),L=Object(i.a)(T,2),G=L[0],R=L[1],W=Object(c.useState)(!1),B=Object(i.a)(W,2),A=B[0],K=B[1],X=Object(c.useCallback)((function(t,n,a,c){var r="";if(t)r=a?"ns-resize":"ew-resize";else if(n){r={"00":"se-resize","01":"ne-resize",10:"sw-resize",11:"nw-resize"}[[+c.right,+c.bottom].join("")]}else r="normal";document.getElementById(e).style.setProperty("cursor",r)}),[e]),Y=Object(c.useCallback)((function(){document.getElementById(e).style.removeProperty("cursor")}),[e]),U=Object(c.useCallback)((function(e){for(var t=e;t;){if(Array.from(t.classList).includes("resizeable-card-container"))return t;t=t.parentElement}return null}),[]);Object(c.useEffect)((function(){var t=document.getElementById(e),c=function(e){e.preventDefault(),K(!0),O({x:e.pageX,y:e.pageY});var c=U(e.target);if(null!==c){n.__updatePropsBeforeChange(),N(c);var r=c.id;if(!0===e.shiftKey)n.toggleSelect(r);else{!1===n.isSelected(r)&&(n.clearSelection(),n.toggleSelect(r));var s=Array.from(e.target.classList),o=s.includes("border"),i=s.includes("corner");if(o||i){var l=s.includes("horizontal"),u=["left","nw","sw"],h=s.some((function(e){return u.includes(e)})),b=["top","nw","ne"],p={right:h,bottom:s.some((function(e){return b.includes(e)}))};w(p),d({width:!l||i,height:l||i}),X(o,i,l,p),z(!0)}else j(!0)}}else if(!0===e.ctrlKey){var f=t.getBoundingClientRect();n.add({pos:{left:e.pageX-f.left+t.scrollLeft,top:e.pageY-f.top+t.scrollTop}})}else e.shiftKey||n.clearSelection(),"touch"!==e.pointerType&&a.setFlagAllowSelection(!0)};return t.addEventListener("pointerdown",c,!1),function(){return t.removeEventListener("pointerdown",c,!1)}}),[n,e,X,U,a]),Object(c.useLayoutEffect)((function(){var a=document.getElementById(e),c=function(e){e.preventDefault();var c={x:e.pageX-g.x,y:e.pageY-g.y};if(b)if(!1===e.shiftKey)n.translateSelected(c);else{var s=Math.abs(c.x)>Math.abs(c.y),o={x:s?c.x:0,y:!s?c.y:0};n.translateSelected(o)}else if(l.width||l.height){var i={x:l.width?c.x:0,y:l.height?c.y:0};n.resize(S.id,i,l,m)}else if(A&&r.allowSelection){var d=a.getBoundingClientRect(),u={flagDraw:!0,pos:{left:Math.round(Math.min(g.x,e.pageX)-d.left+a.scrollLeft,0),top:Math.round(Math.min(g.y,e.pageY)-d.top+a.scrollTop,0)},size:{width:Math.round(Math.abs(e.pageX-g.x),0),height:Math.round(Math.abs(e.pageY-g.y),0)},borderWidth:t};R(u);var h=e.shiftKey;n.selectWithRectangle(u,h)}};return a.addEventListener("pointermove",c,!1),function(){return a.removeEventListener("pointermove",c,!1)}}),[n,e,b,l,m,g,S,A,r.allowSelection,t]),Object(c.useEffect)((function(){var n=document.getElementById(e),c=function(e){K(!1),d({width:!1,height:!1}),j(!1),Y(),z(!1),R({flagDraw:!1,pos:{left:0,top:0},size:{width:0,height:0},borderWidth:t}),a.setFlagAllowSelection(!1)};return n.addEventListener("pointerup",c,!1),function(){return n.removeEventListener("pointerup",c,!1)}}),[n,e,Y,a,t]),Object(c.useEffect)((function(){var e=function(e){switch(e.key){case"Escape":n.clearSelection();break;case"Delete":n.deleteSelected();break;case"Control":E||(a.toggleSnapToGrid(),F(!0));break;case"Backspace":n.deleteSelected()}},t=function(e){switch(e.key){case"Escape":case"Delete":break;case"Control":a.toggleSnapToGrid(),F(!1)}};return window.addEventListener("keydown",e,!1),window.addEventListener("keyup",t,!1),function(){window.removeEventListener("keydown",e,!1),window.removeEventListener("keyup",t,!1)}}),[n,a,E]);var _=JSON.stringify({allowResize:l,allowMove:b,lastClickedPos:g,anchor:m});return[{overrideHoverPointers:P,allowRectangleSelect:r.allowSelection,pointerDown:A},{debugInfo:_,selectionRectangleProps:G}]};n(357);var D=function(e){return Object(a.jsx)("div",{id:e.selRectId,className:"selection-rectangle"+(e.selRectInfo.flagDraw?"":" hide"),style:{left:e.selRectInfo.pos.left,top:e.selRectInfo.pos.top,width:e.selRectInfo.size.width,height:e.selRectInfo.size.height,borderWidth:e.selRectInfo.borderWidth}})};n(358);var I=function(e){return Object(a.jsx)("div",{className:"grid",children:!0===e.controlFlags.displayGrid&&Object(a.jsxs)("span",{children:[Object(a.jsx)("div",{className:"small-grid"}),Object(a.jsx)("div",{className:"big-grid"})]})})},E="dashboard-content";var F=function(e){var t=Object(c.useRef)(null),n=z(E,2,e.cardMethods,e.controlMethods,e.controlFlags),r=Object(i.a)(n,2),s=r[0],o=r[1];return Object(a.jsxs)("div",{id:E,className:"dashboard-content"+(s.allowRectangleSelect?" touch-action-none":""),ref:t,children:[Object(a.jsx)(I,{controlFlags:e.controlFlags,controlProps:e.controlProps,dashboardRef:t}),Array.from(e.cards.values()).map((function(t,n,c){return Object(a.jsx)(P,{cardInfo:t,dashboardFlags:s,controlFlags:e.controlFlags},n)})),Object(a.jsx)(D,{selRectInfo:o.selectionRectangleProps})]})};var T=function(){var e=l(),t=Object(i.a)(e,2),n=t[0],c=t[1],r=h(n),s=Object(i.a)(r,3),o=s[0],d=s[1],u=s[2],p=b(),f=Object(i.a)(p,2),g=f[0],O=f[1];return Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)(j,{cardFlags:d,cardMethods:u,controlFlags:n,controlMethods:c}),Object(a.jsxs)("div",{className:"container-for-side-panel-and-content",children:[Object(a.jsx)(x,{controlFlags:n,controlMethods:c,dataStructure:g,cardMethods:u}),Object(a.jsx)(F,{cards:o,cardMethods:u,controlFlags:n,controlMethods:c,data:O})]})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(T,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[359,1,2]]]);
//# sourceMappingURL=main.f7858fce.chunk.js.map