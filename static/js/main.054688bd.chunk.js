(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[0],[,,,,function(e,t,a){e.exports=a(18)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(3),s=a.n(r),i=(a(9),a(1));a(10);var c=function(){var e=Object(n.useState)(!0),t=Object(i.a)(e,2),a=t[0],o=t[1],r=Object(n.useState)(!1),s=Object(i.a)(r,2),c=s[0],l=s[1],d=Object(n.useState)(!0),u=Object(i.a)(d,2),f=u[0],h=u[1],p=Object(n.useCallback)((function(e){l(!c)}),[c]),g=Object(n.useCallback)((function(e){h(!f)}),[f]);return[{showSidePanel:a,snapToGrid:c,displayGrid:f},{setFlagShowSidePanel:o,toggleSidePanel:function(){o(!a)},toggleSnapToGrid:p,toggleDisplayGrid:g}]},l={width:120,height:180};var d=function(e){var t=Object(n.useState)(new Map),a=Object(i.a)(t,2),o=a[0],r=a[1],s=Object(n.useState)(0),c=Object(i.a)(s,2),d=c[0],u=c[1],f={add:function(e,t){void 0===t&&(t=l),r((function(a){var n=new Map(a),o="card-"+d;return n.set(o,{id:o,pos:e,size:t,propsBeforeChange:{pos:e,size:t},selected:!1,flags:{allowResize:{width:!1,height:!1},allowMove:!1}}),n})),u((function(e){return e+1}))},move:function(t,a){var n={left:e.snapToGrid?20*Math.round(a.left/20,0):a.left,top:e.snapToGrid?20*Math.round(a.top/20,0):a.top};r((function(e){var a=e.get(t),o=new Map(e);return o.set(t,{id:a.id,pos:n,size:a.size,propsBeforeChange:a.propsBeforeChange,selected:a.selected,flags:a.flags}),o}))},translateSelected:function(t){r((function(a){var n=new Map(a);return n.forEach((function(a){if(!0===a.selected){var o=a.propsBeforeChange.pos,r={left:o.left+t.x,top:o.top+t.y},s={left:e.snapToGrid?20*Math.round(r.left/20,0):r.left,top:e.snapToGrid?20*Math.round(r.top/20,0):r.top};n.set(a.id,{id:a.id,pos:s,size:a.size,propsBeforeChange:a.propsBeforeChange,selected:a.selected,flags:a.flags})}})),n}))},resize:function(t,a,n,o){r((function(r){var s=r.get(t),i=s.propsBeforeChange.size,c=s.propsBeforeChange.pos,l={left:o.right?Math.min(c.left+a.x,c.left+i.width-40):c.left,top:o.bottom?Math.min(c.top+a.y,c.top+i.height-40):c.top},d={left:e.snapToGrid&&o.right&&n.width?20*Math.round(l.left/20,0):l.left,top:e.snapToGrid&&o.bottom&&n.height?20*Math.round(l.top/20,0):l.top},u={width:Math.max(i.width+a.x*(o.right?-1:1),40),height:Math.max(i.height+a.y*(o.bottom?-1:1),40)},f=u.width,h=u.height;e.snapToGrid&&(n.width&&(f=o.right?i.width-(d.left-c.left):20*Math.round((c.left+u.width)/20,0)-c.left),n.height&&(h=o.bottom?i.height-(d.top-c.top):20*Math.round((c.top+u.height)/20,0)-c.top));var p={width:f,height:h},g=new Map(r);return g.set(t,{id:s.id,pos:d,size:p,propsBeforeChange:s.propsBeforeChange,selected:s.selected,flags:s.flags}),g}))},__updatePropsBeforeChange:function(){r((function(e){var t=new Map(e);return t.forEach((function(e){t.set(e.id,{id:e.id,pos:e.pos,size:e.size,propsBeforeChange:{pos:e.pos,size:e.size},selected:e.selected,flags:e.flags})})),t}))},isSelected:function(e){return!0===o.has(e)?o.get(e).selected:Error("cardId does not exist.")},toggleSelect:function(e){r((function(t){var a=t.get(e),n=new Map(t);return n.set(e,{id:a.id,pos:a.pos,size:a.size,propsBeforeChange:a.propsBeforeChange,selected:!a.selected,flags:a.flags}),n}))},clearSelection:function(){r((function(e){var t=new Map(e);return t.forEach((function(e){!0===e.selected&&t.set(e.id,{id:e.id,pos:e.pos,size:e.size,propsBeforeChange:e.propsBeforeChange,selected:!1,flags:e.flags})})),t}))},delete:function(e){r((function(t){var a=new Map(t);return a.delete(e),a}))},deleteSelected:function(){r((function(e){var t=new Map(e);return t.forEach((function(e){!0===e.selected&&t.delete(e.id)})),t}))},selectWithRectangle:function(e){r((function(t){var a=new Map(t);return a.forEach((function(t){var n=function(e,t,a){var n=a.pos,o=a.size,r=e.left>=n.left&&e.left+t.width<=n.left+o.width,s=e.top>=n.top&&e.top+t.height<=n.top+o.height;return r&&s}(t.pos,t.size,e);a.set(t.id,{id:t.id,pos:t.pos,size:t.size,propsBeforeChange:t.propsBeforeChange,selected:n,flags:t.flags})})),a}))}};return[o,f]};var u=function(){var e=new Map;return e.set("table1",{id:"table1",fields:["anio","nombre","cantidad"]}),e.set("table2",{id:"table2",fields:["dni","provincia","edad"]}),e.set("table3",{id:"table3",fields:["fruta","calor\xedas"]}),[e,null]};a(11);var f=function(e){return o.a.createElement("div",{className:"controls"},o.a.createElement("button",{onClick:e.controlMethods.toggleSidePanel},"Toggle menu"),o.a.createElement("button",{alt:"Toggle snap to grid",className:e.controlFlags.snapToGrid?"active":"",onPointerDown:e.controlMethods.toggleSnapToGrid},"Snap to grid"),o.a.createElement("button",{alt:"Toggle display grid",className:e.controlFlags.displayGrid?"active":"",onPointerDown:e.controlMethods.toggleDisplayGrid},"Display grid"),o.a.createElement("button",{onClick:function(){return e.cardMethods.add({left:100,top:300})}},"+"),o.a.createElement("button",{onClick:function(e){var t=document.getElementById("dashboard-content");alert(t.scrollWidth+" - "+t.scrollHeight)}},"Test"))};a(12),a(13);var h=function(e){var t=Object(n.useState)(!1),a=Object(i.a)(t,2),r=a[0],s=a[1];return o.a.createElement("section",{className:"table-fields-section"},o.a.createElement("div",{className:"container-button-and-title"},o.a.createElement("button",{className:"button-expand-collapse",onPointerUp:function(e){e.target.innerHTML=r?"+":"-",s(!r)}},"+"),o.a.createElement("h4",{id:e.tableStructure.id,className:"fields-table-name"},e.tableStructure.id)),o.a.createElement("ul",{className:"fields-list"+(r?"":" hidden")},e.tableStructure.fields.map((function(t,a,n){return o.a.createElement("li",{key:a,id:"table-"+e.tableStructure.id+"-field-"+t,className:"field-item"},t)}))))};var p=function(e){var t=Object(n.useState)("fields"),a=Object(i.a)(t,2),r=a[0],s=a[1],c=function(t){var a=t.target.dataset.section;void 0===a&&(a=t.target.parentNode.dataset.section),r!==a?(s(a),e.controlMethods.setFlagShowSidePanel(!0)):e.controlMethods.toggleSidePanel()};return o.a.createElement("div",{className:"side-panel"+(e.controlFlags.showSidePanel?"":" hide")},o.a.createElement("div",{className:"buttons-container"},o.a.createElement("button",{"data-section":"fields",className:"fields"===r?"active":"",onPointerDown:c},o.a.createElement("span",{className:"text"},"Fields")),o.a.createElement("button",{"data-section":"format",className:"format"===r?"active":"",onPointerDown:c},o.a.createElement("span",{className:"text"},"Format")),o.a.createElement("button",{"data-section":"other",className:"other"===r?"active":"",onPointerDown:c},o.a.createElement("span",{className:"text"},"Other"))),o.a.createElement("div",{className:"sections-container"},o.a.createElement("section",{className:"section"+("fields"===r?" active":"")},o.a.createElement("h3",{className:"title"},"Fields"),Array.from(e.dataStructure.values()).map((function(e,t,a){return o.a.createElement(h,{key:t,tableStructure:e})}))),o.a.createElement("section",{className:"section"+("format"===r?" active":"")},o.a.createElement("h3",{className:"title"},"Format"),"Format options"),o.a.createElement("section",{className:"section"+("other"===r?" active":"")},o.a.createElement("h3",{className:"title"},"Other"),"Other")))};a(14),a(15);var g=function(e){var t=e.cardInfo.selected;return o.a.createElement("div",{id:e.cardInfo.id,className:"resizeable-card-container"+(t?" selected":"")+(e.controlFlags.snapToGrid?" animate-all":"")+(e.dashboardFlags.overrideHoverPointers?" unset-cursors":""),style:{left:e.cardInfo.pos.left+"px",top:e.cardInfo.pos.top+"px",backgroundColor:e.color}},o.a.createElement("div",{className:"col-container"},o.a.createElement("div",{className:"corner nw","data-anchor":{right:!0,bottom:!0}}),o.a.createElement("div",{className:"border vertical left","data-anchor":{right:!0,bottom:!1}}),o.a.createElement("div",{className:"corner sw","data-anchor":{right:!0,bottom:!1}})),o.a.createElement("div",{className:"col-container"},o.a.createElement("div",{className:"border horizontal top","data-anchor":{right:!1,bottom:!0}}),o.a.createElement("div",{className:"content",style:{width:e.cardInfo.size.width+"px",height:e.cardInfo.size.height+"px"}}),o.a.createElement("div",{className:"border horizontal bottom","data-anchor":{right:!1,bottom:!1}})),o.a.createElement("div",{className:"col-container"},o.a.createElement("div",{className:"corner ne","data-anchor":{right:!1,bottom:!0}}),o.a.createElement("div",{className:"border vertical right","data-anchor":{right:!1,bottom:!1}}),o.a.createElement("div",{className:"corner se","data-anchor":{right:!1,bottom:!1}})))};var m=function(e,t,a){var o=Object(n.useState)({width:!1,height:!1}),r=Object(i.a)(o,2),s=r[0],c=r[1],l=Object(n.useState)(!1),d=Object(i.a)(l,2),u=d[0],f=d[1],h=Object(n.useState)({x:0,y:0}),p=Object(i.a)(h,2),g=p[0],m=p[1],b=Object(n.useState)({right:!1,bottom:!1}),v=Object(i.a)(b,2),w=v[0],E=v[1],S=Object(n.useState)(null),y=Object(i.a)(S,2),O=y[0],j=y[1],z=Object(n.useState)(!1),M=Object(i.a)(z,2),N=M[0],C=M[1],B=Object(n.useState)(!1),k=Object(i.a)(B,2),x=k[0],I=k[1],P=Object(n.useState)({flagDraw:!1,pos:{left:0,top:0},size:{width:0,height:0}}),F=Object(i.a)(P,2),T=F[0],G=F[1],L=Object(n.useState)(!1),R=Object(i.a)(L,2),D=R[0],W=R[1],A=Object(n.useState)({width:"100%",height:"100%"}),H=Object(i.a)(A,2),X=H[0],Y=H[1],_=Object(n.useCallback)((function(t,a,n,o){var r="";if(t)r=n?"ns-resize":"ew-resize";else if(a){r={"00":"se-resize","01":"ne-resize",10:"sw-resize",11:"nw-resize"}[[+o.right,+o.bottom].join("")]}else r="normal";document.getElementById(e).style.setProperty("cursor",r)}),[e]),J=Object(n.useCallback)((function(){document.getElementById(e).style.removeProperty("cursor")}),[e]),K=Object(n.useCallback)((function(e){for(var t=e;t;){if(Array.from(t.classList).includes("resizeable-card-container"))return t;t=t.parentElement}return null}),[]);return Object(n.useEffect)((function(){var a=document.getElementById(e),n=function(e){e.preventDefault(),W(!0),m({x:e.pageX,y:e.pageY});var n=K(e.target);if(null!==n){t.__updatePropsBeforeChange(),j(n);var o=n.id;if(!0===e.shiftKey)t.toggleSelect(o);else{!1===t.isSelected(o)&&(t.clearSelection(),t.toggleSelect(o));var r=Array.from(e.target.classList),s=r.includes("border"),i=r.includes("corner");if(s||i){var l=r.includes("horizontal"),d=["left","nw","sw"],u=r.some((function(e){return d.includes(e)})),h=["top","nw","ne"],p={right:u,bottom:r.some((function(e){return h.includes(e)}))};E(p),c({width:!l||i,height:l||i}),_(s,i,l,p),C(!0)}else f(!0)}}else if(!0===e.ctrlKey){var g=a.getBoundingClientRect();t.add({left:e.pageX-g.left+a.scrollLeft,top:e.pageY-g.top+a.scrollTop})}else t.clearSelection()};return a.addEventListener("pointerdown",n,!1),function(){return a.removeEventListener("pointerdown",n,!1)}}),[t,e,_,K]),Object(n.useLayoutEffect)((function(){var a=document.getElementById(e),n=function(e){var n={x:e.pageX-g.x,y:e.pageY-g.y};if(u)if(!1===e.shiftKey)t.translateSelected(n);else{var o=Math.abs(n.x)>Math.abs(n.y),r={x:o?n.x:0,y:!o?n.y:0};t.translateSelected(r)}else if(s.width||s.height){var i={x:s.width?n.x:0,y:s.height?n.y:0};t.resize(O.id,i,s,w)}else if(D){var c=a.getBoundingClientRect(),l={flagDraw:!0,pos:{left:Math.min(g.x,e.pageX)-c.left+a.scrollLeft,top:Math.min(g.y,e.pageY)-c.top+a.scrollTop},size:{width:Math.abs(e.pageX-g.x),height:Math.abs(e.pageY-g.y)}};G(l),t.selectWithRectangle(l)}(u||s.width||s.height)&&(console.log("ran"),Y({width:a.scrollWidth,height:a.scrollHeight}))};return a.addEventListener("pointermove",n,!1),function(){return a.removeEventListener("pointermove",n,!1)}}),[t,e,u,s,w,g,O,D]),Object(n.useEffect)((function(){var t=document.getElementById(e),a=function(e){W(!1),c({width:!1,height:!1}),f(!1),J(),C(!1),G({flagDraw:!1,pos:{left:0,top:0},size:{width:0,height:0}})};return t.addEventListener("pointerup",a,!1),function(){return t.removeEventListener("pointerup",a,!1)}}),[t,e,J]),Object(n.useEffect)((function(){var e=function(e){switch(e.key){case"Escape":t.clearSelection();break;case"Delete":t.deleteSelected();break;case"Control":x||(a.toggleSnapToGrid(),I(!0));break;case"Backspace":t.deleteSelected()}},n=function(e){switch(e.key){case"Escape":case"Delete":break;case"Control":a.toggleSnapToGrid(),I(!1)}};return window.addEventListener("keydown",e,!1),window.addEventListener("keyup",n,!1),function(){window.removeEventListener("keydown",e,!1),window.removeEventListener("keyup",n,!1)}}),[t,a,x]),[{overrideHoverPointers:N},{debugInfo:JSON.stringify({allowResize:s,allowMove:u,lastClickedPos:g,anchor:w}),selectionRectangleProps:T,scrollSize:X}]};a(16);var b=function(e){return o.a.createElement("div",{className:"selection-rectangle"+(e.selRectInfo.flagDraw?"":" hide"),style:{left:e.selRectInfo.pos.left,top:e.selRectInfo.pos.top,width:e.selRectInfo.size.width,height:e.selRectInfo.size.height}})};a(17);var v=function(e){return o.a.createElement("div",{className:"grid",style:{width:e.dashboardScrollSize.width,height:e.dashboardScrollSize.height}},!0===e.controlFlags.displayGrid&&o.a.createElement("span",null,o.a.createElement("div",{className:"small-grid"}),o.a.createElement("div",{className:"big-grid"})))};var w=function(e){var t=Object(n.useRef)(null),a=m("dashboard-content",e.cardMethods,e.controlMethods),r=Object(i.a)(a,2),s=r[0],c=r[1];return o.a.createElement("div",{id:"dashboard-content",className:"dashboard-content",ref:t},o.a.createElement(v,{controlFlags:e.controlFlags,dashboardRef:t,dashboardScrollSize:c.scrollSize}),Array.from(e.cards.values()).map((function(t,a,n){return o.a.createElement(g,{key:a,cardInfo:t,dashboardFlags:s,controlFlags:e.controlFlags})})),o.a.createElement(b,{selRectInfo:c.selectionRectangleProps}))};var E=function(){var e=c(),t=Object(i.a)(e,2),a=t[0],n=t[1],r=d(a),s=Object(i.a)(r,2),l=s[0],h=s[1],g=u(),m=Object(i.a)(g,2),b=m[0],v=m[1];return o.a.createElement("div",{className:"App"},o.a.createElement(f,{cardMethods:h,controlFlags:a,controlMethods:n}),o.a.createElement("div",{className:"container-for-side-panel-and-content"},o.a.createElement(p,{controlFlags:a,controlMethods:n,dataStructure:b}),o.a.createElement(w,{cards:l,cardMethods:h,controlFlags:a,controlMethods:n,data:v})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(E,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[4,1,2]]]);
//# sourceMappingURL=main.054688bd.chunk.js.map